<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Greenhouse Gas Emissions Estimate Methodology" href="ghg_emissions.html" /><link rel="prev" title="Emissions Oracle Documentation!" href="index.html" />

    <meta name="generator" content="sphinx-4.4.0, furo 2022.02.23"/>
        <title>Data Science Pipeline - Emissions Oracle documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=3c656993158f05539f962c5cea52a5e6c184bb8c" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=25ceb02ed1c46dc30f2321ff83e92799f69dfdb9" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Emissions Oracle  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Emissions Oracle  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Methodologies</span></p>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Data Science Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="ghg_emissions.html">Greenhouse Gas Emissions Estimate Methodology</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_assumptions.html">Project Assumptions</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="data-science-pipeline">
<h1>Data Science Pipeline<a class="headerlink" href="#data-science-pipeline" title="Permalink to this headline">#</a></h1>
<p>This page aims to provide details on the methodologies used and assumptions made for the Data Science End-to-End Pipeline (data collection, preprocessing, feature engineering, modelling, reporting).</p>
<section id="data-layers">
<h2>Data Layers<a class="headerlink" href="#data-layers" title="Permalink to this headline">#</a></h2>
<p>The project was structured to easily allow the end to end running of data science pipeline through an interface.
To create modular components that feed into each other, both the data and python scripts were separated into multiple layers. The different data layers are described below.</p>
<section id="raw">
<h3>Raw<a class="headerlink" href="#raw" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>The data pulled from the external source is the raw data. Raw data is immutable and is never edited. This allows for anyone to be able to reproduce the final products with only the python code and the raw data.</p></li>
<li><p>For this project, all data was pulled from the US Energy Information Administration which is committed to open data by making it free and available through an Application Programming Interface (API).</p></li>
</ul>
</section>
<section id="intermediate">
<h3>Intermediate<a class="headerlink" href="#intermediate" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>If the raw data is messy, it is advisable to create an intermediate layer that consists of tidy copies of raw data. We should not combine different data sets or create calculated fields in this layer.</p></li>
<li><p>For this project, this stage involved two main steps:</p>
<ul>
<li><p>For successful API requests, convert raw data in JSON format to CSV and impute any missing time periods with a value of 0</p></li>
<li><p>For unsuccessful API requests, it implies there is no electricity generation for the specific type and thus creating an empty CSV with 0 for every time period.</p></li>
</ul>
</li>
</ul>
</section>
<section id="processed">
<h3>Processed<a class="headerlink" href="#processed" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>To perform the modelling work, the input data needs to be combined and enriched by creating features. The data sets created in this process are stored in the processed layer and are ready to be used as input into machine learning algorithms.</p></li>
<li><p>For this project, most of the electricity generation data mapped directly to a feature of the same type without any transformations. For example, API output for coal generation mapped directly to a feature for coal generation by time.</p></li>
<li><p>The only engineered feature was “Other” category of electricity generation with the following calculation:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">other_generation</span> <span class="pre">=</span> <span class="pre">other_renewables_generation</span> <span class="pre">-</span> <span class="pre">wind_generation</span> <span class="pre">-</span> <span class="pre">solar_utility_generation</span> <span class="pre">+</span> <span class="pre">EIA_other_generation</span></code></p></li>
<li><p>This calculation was based on research into which generation sources fall under each label in the <a class="reference external" href="https://www.eia.gov/electricity/annual/html/epa_03_01_a.html">EIA Electricity Generation data</a>.</p></li>
<li><p>Note: The calculated feature <cite>other_generation</cite> is different from the <cite>Other</cite> imported from EIA directly.</p></li>
</ul>
</li>
</ul>
</section>
<section id="models">
<h3>Models<a class="headerlink" href="#models" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>The processed data is used to train predictive models, explanatory models, etc. The trained models are stored in the model layer.</p></li>
<li><p>For this project, this layer contains all the time-series forecasting models (specifically <a class="reference external" href="https://facebook.github.io/prophet/">Facebook Prophet</a> models).</p>
<ul>
<li><p>There are 10 Prophet models for each region (one for each type of electricity generation / fuel consumption)</p></li>
</ul>
</li>
</ul>
</section>
<section id="model-output">
<h3>Model Output<a class="headerlink" href="#model-output" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>Model performance metrics, model selection information and predictions are kept in the model output layer.</p></li>
</ul>
</section>
<section id="reporting">
<h3>Reporting<a class="headerlink" href="#reporting" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>Reporting can be performed across the pipeline. This layer can contain data in numerous formats to aid in the sharing of relevant insights.</p></li>
<li><p>For this project, there are three main types of reporting data that is used to power the Streamlit Web Application:</p>
<ul>
<li><p><strong>Individual Forecasts</strong>: This folder contains forecasts for each Prophet model separately, thus one forecast for each type of generation source.</p></li>
<li><p><strong>Combined Forecasts</strong>: This folder combines the data from individual forecasts to create one CSV each for each region. For example, the Net Electricity Generation CSV for Alabama will contain one column for every type of generation source along with a date column.</p></li>
<li><p><strong>Emission Forecasts</strong>: This folder contains GHG emissions estimates for all the electricity generation in each region. The two types of emissions data is:</p>
<ul>
<li><p>Emissions Intensity: This is the volume of GHG emissions per unit of electricity generated. Hence, the lower the emissions intensity, the greener the electricity grid. This value allows for easier comparison of emissions between regions compared to using “Total Emissions”.</p></li>
<li><p>Total Emissions: This is the volume of total GHG emissions for the chosen electricity generation source.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
</section>
<section id="pipeline-interface">
<h2>Pipeline Interface<a class="headerlink" href="#pipeline-interface" title="Permalink to this headline">#</a></h2>
<p>A higher level interface has also been created to easily re-run any specific component of the data pipeline above without affecting
other modular components.</p>
<p>This is done through a python class called <code class="docutils literal notranslate"><span class="pre">PipelineInterface</span></code> and sample code to run any pipeline component is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">interface</span> <span class="o">=</span> <span class="n">PipelineInterface</span><span class="p">(</span><span class="n">EIA_API_IDS_YML_FILEPATH</span><span class="p">,</span> <span class="n">EMISSIONS_FACTORS_YML_FILEPATH</span><span class="p">)</span>
<span class="n">interface</span><span class="o">.</span><span class="n">pull_data</span><span class="p">()</span>
<span class="n">interface</span><span class="o">.</span><span class="n">clean_data</span><span class="p">()</span>
<span class="n">interface</span><span class="o">.</span><span class="n">process_data</span><span class="p">()</span>
<span class="n">interface</span><span class="o">.</span><span class="n">train_models</span><span class="p">()</span>
<span class="n">interface</span><span class="o">.</span><span class="n">create_forecasts</span><span class="p">()</span>
<span class="n">interface</span><span class="o">.</span><span class="n">calculate_emissions</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="ghg_emissions.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Greenhouse Gas Emissions Estimate Methodology</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Data Science Pipeline</a><ul>
<li><a class="reference internal" href="#data-layers">Data Layers</a><ul>
<li><a class="reference internal" href="#raw">Raw</a></li>
<li><a class="reference internal" href="#intermediate">Intermediate</a></li>
<li><a class="reference internal" href="#processed">Processed</a></li>
<li><a class="reference internal" href="#models">Models</a></li>
<li><a class="reference internal" href="#model-output">Model Output</a></li>
<li><a class="reference internal" href="#reporting">Reporting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pipeline-interface">Pipeline Interface</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>